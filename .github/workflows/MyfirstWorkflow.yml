name: My First Workflow

on: 
  push:
    branches:
      - main
      
  workflow_dispatch:
    inputs:
      test:
        description: "It's nice to see this description"
        required: true
        type: string
      loglevel:
        description: "Log level"
        default: info
        type: choice
        options:
          - info
          - warning
          - debug
      testbuild:
        description: "It's a test build"
        required: true
        type: boolean
      environment:
        description: "Env to deploy"
        type: environment
        required: true
  repository_dispatch:
    types: ["coffee", "tea"]

jobs:
  matrix_super_job:
    name: Super Efficient Build
    strategy:
      fail-fast: false
      max-parallel: 3
      matrix:
        os_version: [macos-latest, ubuntu-latest]
        node_version: [20, 22, 24]
    runs-on: ${{ matrix.os_version }}
    steps:
      - name: Checkout
        uses: actions/checkout@v5.0.0
        
      - name: Install NodeJS
        uses: actions/setup-node@v6
        with:
          node-version: ${{ matrix.node_version }}
      

  MyFirstJob:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v5.0.0

      - name: Hello World
        # ðŸ’¡ Ð˜Ð¡ÐŸÐ ÐÐ’Ð›Ð•ÐÐ˜Ð• ÐžÐ¨Ð˜Ð‘ÐšÐ˜: Ð£Ð´Ð°Ð»ÐµÐ½ 'working-directory: ./temp', Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸Ð·Ð±ÐµÐ¶Ð°Ñ‚ÑŒ ÑÐ±Ð¾Ñ "No such file or directory"
        run: echo "Hello World"

      - name: List files
        run: |
          echo "Event: ${{ github.event_name }}"
          echo "This repository ${{ github.repository }} contains the following files:"
          tree -a

      - name: Show inputs
        if: ${{ github.event_name == 'workflow_dispatch' }}
        run: |
          echo "--- Workflow Dispatch Inputs ---"
          echo "test input value: ${{ github.event.inputs.test }}"
          echo "loglevel input: ${{ github.event.inputs.loglevel }}"
          echo "testbuild input: ${{ github.event.inputs.testbuild }}"
          echo "environment input: ${{ github.event.inputs.environment }}"

      - name: Show payload
        if: ${{ github.event_name == 'repository_dispatch' }}
        run: |
          echo "--- Repository Dispatch Payload ---"
          echo Payload: '${{ toJSON(github.event.client_payload) }}'

  MySecondJob:
    runs-on: ubuntu-latest
    needs: MyFirstJob
    steps:
      - run: "echo Job: ${{ github.job }}"
    
  MyThirdJob:
    runs-on: ubuntu-latest
    needs: MyFirstJob
    steps:
      - run: "echo Job: ${{ github.job }}"
      
  MyFourthJob:
    needs: [MySecondJob, MyThirdJob]
    runs-on: ubuntu-latest
    steps:
      - run: "echo Job: ${{ github.job }}"

  MyFifthJob:
    runs-on: ubuntu-latest
    steps:
      - run: "echo Job: ${{ github.job }}"

  Post:
      runs-on: ubuntu-latest
      steps:
        - id: test_step
          run: |
           echo "Post"
           test_results=passed
           sleep_time=15
           echo "::add-mask::test_results"
           echo "::add-mask::sleep_time"
           echo "test_results=$test_results" >> $GITHUB_OUTPUT
           echo "sleep_time=$sleep_time" >> $GITHUB_OUTPUT


        - if: failure()
          run: |
           echo "::debug:: Debug message"
           echo "::error file=.github/workflows/MyfirstWorkflow.yaml,line=110::Failure!"
           echo "::warning file=.github/workflows/MyfirstWorkflow.yaml,line=110,endLine=116,col=76,endColumn=110::Warning message!"
        
        - if: cancelled()
          run: echo "Cancelled!" 

        - if: success()
          run: echo "Success!"

        - if: always()
          run: |
           echo "Test Results: ${{ steps.test_step.outputs.test_results }}"
           sleep ${{ steps.test_step.outputs.sleep_time }}
           echo "Always"
