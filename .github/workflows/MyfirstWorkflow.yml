name: My First Workflow

on:
  workflow_dispatch:
    inputs:
      test:
        description: "It's nice to see this description"
        required: true
      loglevel:
        description: "Log level"
        default: info
        type: choice
        options:
          - info
          - warning
          - debug
      testbuild:
        description: "It's a test build"
        required: true
        type: boolean
      environment:
        description: "Env to deploy"
        type: environment
        required: true
  repository_dispatch:
    types: ["coffee", "tea"]
        

jobs:
  matrix_super_job:
    name: Super Efficient Build
    strategy:
      fail-fast: false
      max-parallel: 3
      matrix:
        os_version: [macos-latest, ubuntu-latest]
        node_version: [20, 22, 24]
    runs-on: ${{ matrix.os_version }}
    steps:
      - name: Install NodeJS
        uses: actions/setup-node@v6
        with:
          node-version: ${{ matrix.node_version }}

  MyFirstJob:
    runs-on: ubuntu-latest
    steps:
      - name: Hello World
        run: echo "Hello World"
        working-directory: ./temp

      - name: Checkout
        uses: actions/checkout@v5.0.0

      - name: List files
        run: |
          echo "Event: ${{ github.event_name }}"
          echo "This repository ${{ github.repository }} contains the following files:"
          tree -a

      - name: Show inputs
        if: ${{ github.event_name == 'workflow_dispatch' }}
        run: |    
          echo "test input value: ${{ inputs.test }}"
          echo "loglevel input: ${{ inputs.loglevel }}"
          echo "testbuild input: ${{ inputs.testbuild }}"
          echo "environment input: ${{ inputs.environment }}"

      - name: Show payload
        if: ${{ github.event_name == 'repository_dispatch' }}
        run: |
          echo Payload: '${{ toJSON(github.event.client_payload) }}'

  MySecondJob:
    runs-on: ubuntu-latest
    needs: MyFirstJob
    steps:
      - run: "echo Job: ${{ github.job }}"
    
  MyThirdJob:
    runs-on: ubuntu-latest
    needs: MyFirstJob
    steps:
      - run: "echo Job: ${{ github.job }}"
      
  MyFourthJob:
    needs: [MySecondJob, MyThirdJob]
    runs-on: ubuntu-latest
    steps:
      - run: "echo Job: ${{ github.job }}"

  MyFifthJob:
    runs-on: ubuntu-latest
    steps:
      - run: "echo Job: ${{ github.job }}"